services:
  - name: tms-backend
    type: web
    env: node
    plan: starter     # lub free, je≈õli u≈ºywasz darmowego
    region: frankfurt  # najlepszy dla EU/UK
    autoDeploy: true

    buildCommand: "npm install"
    startCommand: "node server/server.js"

    envVars:
      NODE_ENV: production
      PORT: 10000

      # üîê JWT
      JWT_SECRET:
        fromSecret: JWT_SECRET

      # üêò DATABASE
      DB_HOST:
        fromSecret: DB_HOST
      DB_PORT:
        fromSecret: DB_PORT
      DB_USER:
        fromSecret: DB_USER
      DB_PASS:
        fromSecret: DB_PASS
      DB_NAME:
        fromSecret: DB_NAME
      DB_URL:
        fromSecret: DATABASE_URL

      # üåê CORS FRONTEND
      FRONTEND_URL:
        fromSecret: FRONTEND_URL

    healthCheckPath: "/health"

    disk:
      name: temp-storage
      mountPath: "/opt/render/project/.cache"
      sizeGB: 1
